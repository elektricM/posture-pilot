; PlatformIO Project Configuration File
;
; PosturePilot - AI Posture Monitor
; Target: Seeed Studio XIAO ESP32S3 Sense
;
; Modes:
;   Monitor mode (default) - TFLite inference + MQTT
;   Collect mode - HTTP server for training data collection

[env:xiao_esp32s3]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
monitor_speed = 115200

; Required libraries
lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^6.21.3
    ESP Async WebServer
    AsyncTCP
    https://github.com/j-siderius/TFLiteMicro_ArduinoESP32S3.git

; Partition scheme for larger app (TFLite model + web server)
board_build.partitions = huge_app.csv

; Upload settings
upload_speed = 921600
; upload_port = /dev/ttyUSB0

; OTA upload (uncomment to flash over WiFi)
; upload_protocol = espota
; upload_port = posture-pilot.local

; XIAO ESP32S3 Sense has 8MB OPI PSRAM
build_flags =
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DCONFIG_CAMERA_MODEL_XIAO_ESP32S3
    -I.pio/libdeps/xiao_esp32s3/TFLiteMicro_ArduinoESP32S3/src/third_party

; Enable OPI PSRAM (8MB on XIAO ESP32S3 Sense)
board_build.arduino.memory_type = qio_opi
